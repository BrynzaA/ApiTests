## 1. Тесты постов

### Создание поста

### ID: TC-11
Название: Создание поста с минимальными обязательными полями (title и content) через REST API
Предусловия:
1. Пользователь авторизован
2. Эндпоинт /wp/v2/posts доступен
   Шаги:
1. Сгенерировать уникальные тестовые данные: title, content
2. Сформировать тело POST-запроса с полями title и content
3. Отправить POST-запрос на создание поста
4. Зафиксировать код и тело ответа
   Ожидаемый результат:
1. Статус-код ответа: 201 Created.
2. В теле ответа id нового поста не null и больше 0
3. В теле ответа title.raw соответствует отправленному заголовку
4. В теле ответа content.raw соответствует отправленному контенту
5. В теле ответа status равен draft, статус по умолчанию



### ID: TC-12
Название: Создание поста со всеми возможными полями через REST API
Предусловия:
1. Пользователь авторизован
2. Эндпоинт /wp/v2/posts доступен
   Шаги:
1. Сгенерировать уникальные тестовые данные
2. Сгенерировать дату в будущем
3. Сформировать тело POST-запроса, заполнив все поля
4. Отправить POST-запрос

Ожидаемый результат:
1. Статус-код ответа: 201 Created
2. Все поля в ответе соответствуют отправленным значениям


### ID: TC-13
Название: Проверка корректности записи в БД после успешного создания поста
Предусловия:
1. Успешно выполнен TC-11, зафиксирован postId
2. Настроено подключение к БД
   Шаги:
1. Выполнить SQL-запрос для получения записи из wp_posts по ID = postId
2. Получить значения полей post_title, post_content, post_status, post_name
   Тестовые данные: postId созданного поста
   Ожидаемый результат:
1. Запись с указанным ID существует
2. Поле post_title в БД соответствует заголовку, отправленному в API
3. Поле post_content в БД соответствует контенту, отправленному в API
4. Поле post_status в БД соответствует статусу из ответа API
5. Поле post_name в БД соответствует slug из ответа API


### ID: TC-14
Название: Проверка создания поста с различными допустимыми статусами
Предусловия:
1. Пользователь авторизован
   Шаги:
1. Для каждого статуса:
   a. Сгенерировать уникальные title и content
   b. Создать объект пост с заданным status
   c. Для статуса future дополнительно установить дату публикации в будущем
   d. Отправить POST-запрос на создание поста
   e. Зафиксировать ответ
   Тестовые данные: Четыре набора данных, по одному для каждого статуса
   Ожидаемый результат для каждого вызова:
1. Статус-код ответа: 201 Created
2. id созданного поста > 0
3. Поле status в ответе соответствует статусу, отправленному в запросе


### Чтение постов

### ID: TC-21
Название: Получение полного списка постов через GET-запрос
Предусловия:
1. Пользователь авторизован.
2. В системе существует как минимум один пост
   Шаги:
1. Отправить GET-запрос к эндпоинту /wp/v2/posts
2. Зафиксировать ответ.
   Ожидаемый результат:
1. Статус-код ответа: 200 OK
2. Тело ответа является непустым массивом
3. Каждый элемент массива содержит обязательные поля: id, title, content


### ID: TC-22
Название: Получение данных конкретного поста по его валидному ID
Предусловия:
1. Создан пост с известным postId и статусом publish, запись существует в БД
   Шаги:
1. Выполнить GET-запрос к эндпоинту /wp/v2/posts/{postId}
2. Зафиксировать ответ
   Тестовые данные: postId существующего опубликованного поста
   Ожидаемый результат:
1. Статус-код ответа: 200 OK
2. В теле ответа id равен запрошенному postId
3. Поля title.rendered и content.rendered не пусты и соответствуют данным поста
4. Поле status равно publish


### Обновление поста

### ID: TC-31
Название: Изменение заголовка существующего поста
Предусловия:
1. Создан пост с известным postId
   Шаги:
1. Сгенерировать новый уникальный заголовок
2. Сформировать тело PUT/POST-запроса с полем title, содержащим новый заголовок
3. Отправить запрос на обновление поста на эндпоинт /wp/v2/posts/{postId}
4. Зафиксировать ответ API
5. Выполнить проверку в БД
   Тестовые данные: postId существующего поста, новый заголовок
   Ожидаемый результат:
1. Статус-код ответа API: 200 OK
2. Поле title.raw в ответе API равно newTitle
3. Поле post_title в БД равно newTitle


### ID: TC-32
Название: Изменение основного контента существующего поста
Предусловия: Аналогично TC-31
Шаги:
1. Сгенерировать новый уникальный контент
2. Сформировать тело запроса с полем content, содержащим новый уникальный контент
3. Отправить запрос на обновление поста
4. Зафиксировать ответ API
5. Выполнить проверку в БД
   Тестовые данные: postId существующего поста, новый контент
   Ожидаемый результат:
1. Статус-код ответа API: 200 OK
2. Поле content.raw в ответе API равно новый уникальный контент
3. Поле post_content в БД равно новый уникальный контент


### ID: TC-33
Название: Изменение статуса существующего поста
Предусловия: Создан пост со статусом draft
Шаги:
1. Сформировать тело запроса с полем status равным publish
2. Отправить запрос на обновление поста
3. Зафиксировать ответ API и проверить БД
4. Повторить шаги для смены статуса на private
   Тестовые данные: postId черновика
   Ожидаемый результат:
1. После первого обновления: статус-код 200, поле status в ответе и поле post_status в БД равны publish
2. После второго обновления: статус-код 200, поле status в ответе и поле post_status в БД равны private


### ID: TC-34
Название: Комплексное обновление нескольких полей поста с проверкой корректности записи в БД
Предусловия: Создан пост
Шаги:
1. Подготовить новые данные для всех обновляемых полей
2. Отправить один запрос на обновление поста со всеми новыми данными
3. Зафиксировать ответ API
4. Выполнить SQL-запрос для получения полной записи из wp_posts
   Тестовые данные: Полный набор новых значений для всех обновляемых полей
   Ожидаемый результат:
1. Статус-код ответа API: 200 OK
2. Все обновленные поля в ответе API соответствуют отправленным значениям
3. Все соответствующие поля в БД соответствуют отправленным значениям


### Удаление поста

### ID: TC-41
Название: Удаление поста через API
Предусловия: Создан пост с известным postId. Пост существует в БД и доступен через GET-запрос
Шаги:
1. Убедиться, что пост доступен по GET /wp/v2/posts/{postId}
2. Отправить DELETE-запрос на эндпоинт /wp/v2/posts/{postId}
3. Зафиксировать ответ API
4. Отправить GET-запрос для получения удаленного поста
   Тестовые данные: postId существующего поста
   Ожидаемый результат:
1. Ответ на DELETE-запрос: статус-код 200, тело содержит "deleted": true и "previous.id": postId
2. Последующий GET-запрос к удаленному посту возвращает статус-код 404 Not Found
3. Метод DatabaseManager.isPostExists(postId) возвращает false


### ID: TC-42
Название: Проверка физического удаления записи из таблицы wp_posts после удаления поста
Предусловия: Создан пост.
Шаги:
1. Проверить в БД что пост существует
2. Удалить пост через DELETE-запрос
3. Повторно проверить существование поста в БД
   Тестовые данные: postId существующего поста
   Ожидаемый результат:
1. Перед удалением: проверка в БД возвращает true
2. После удаления: проверка в БД возвращает false


## 2. Тесты страницы

### ID: TC-51
Название: Создание страницы через REST API
Предусловия: Пользователь авторизован
Шаги:
1. Отправить POST-запрос к /wp/v2/pages с телом, содержащим title и content
2. Зафиксировать ответ
   Тестовые данные: Уникальные title и content
   Ожидаемый результат: Статус-код 201. В ответе id новой страницы, type равен page


### ID: TC-52
Название: Проверка записи созданной страницы в БД (post_type = 'page')
Предусловия: Успешно выполнен TC-51. Зафиксирован pageId
Шаги: Выполнить SQL-запрос к wp_posts по ID = pageId
Тестовые данные: pageId
Ожидаемый результат: Запись существует. post_title и post_content соответствуют отправленным. post_type равен page


### ID: TC-53
Название: Обновление содержимого (контента) существующей страницы через REST API
Предусловия:
1. Создана страница с известным pageId. Страница существует в БД
2. Пользователь авторизован и имеет права на редактирование страниц
Шаги:
3. Сгенерировать новый уникальный контент
4. Сформировать тело PUT/POST-запроса с полем content, содержащим новый уникальный контент
5. Отправить запрос на обновление страницы на эндпоинт /wp/v2/pages/{pageId}
6. Зафиксировать ответ API
7. Выполнить проверку в БД
Тестовые данные:существующей страницы, новый уникальный текст контента
Ожидаемый результат:
1. Статус-код ответа 200 OK
2. Поле content.raw в ответе API равно newContent
3. Остальные поля страницы остались неизменными
4. Поле post_content в БД равно newContent
5. Поле post_type в БД осталось равным page

### ID: TC-54
Название: Удаление страницы через API с проверкой удаления из БД
Предусловия:
1. Создана страница с известным pageId. Страница существует в БД
2. Страница доступна через GET-запрос
3. Пользователь авторизован и имеет права на удаление страниц
Шаги:
4. (Предварительная проверка) Убедиться, что страница доступна по GET /wp/v2/pages/{pageId}
5. (Предварительная проверка) Убедиться что запись существует в БД.
6. Отправить DELETE-запрос на эндпоинт /wp/v2/pages/{pageId}
7. Зафиксировать ответ API.
8. Отправить GET-запрос для получения удаленной страницы.
9. проверки существования записи в БД.
Тестовые данные:pageId существующей страницы.
Ожидаемый результат:
10. Ответ на DELETE-запрос: 200, тело содержит: "deleted": true, "previous.id": pageId, "previous.type": "page"
11. Последующий GET-запрос к удаленной странице возвращает 404 Not Found.


## 3. Тесты комментариев

### ID: TC-61
Название: Создание комментария к существующему посту
Предусловия:
1. Создан пост со статусом, допускающим комментирование
   Шаги:
1. Сгенерировать уникальный текст комментария имя и email автора
2. Отправить POST-запрос к /wp/v2/comments с телом, содержащим post, content, author_name
3. Зафиксировать ответ
4. Получить созданный комментарий по его id
   Тестовые данные: postId, commentContent, authorName
   Ожидаемый результат:
1. Статус-код ответа на создание: 201
2. В ответе id комментария > 0
3. GET-запрос к комментарию возвращает код 200, а также корректные значения полей: post, content.rendered, author_name, status="approved"


### ID: TC-62
Название: Получение списка комментариев, принадлежащих конкретному посту
Предусловия: Создан пост. К нему создано как минимум два комментария
Шаги:
1. Зафиксировать id созданных комментариев
2. Отправить GET-запрос к /wp/v2/comments с параметром post={postId}
3. Зафиксировать ответ
   Тестовые данные: postId
   Ожидаемый результат:
1. Статус-код 200
2. Массив в ответе содержит как минимум 2 элемента
3. Список id в ответе содержит comment1Id и comment2Id
4. Все элементы в массиве имеют поле post, равное postId


### ID: TC-63
Название: Создание вложенного комментария
Предусловия: Создан пост и родительский комментарий к нему
Шаги:
1. Сформировать тело запроса с полями post, parent, content, author_name
2. Отправить POST-запрос на создание комментария.
3. Зафиксировать ответ.
4. Получить родительский комментарий
   Тестовые данные: postId, parentCommentId, текст ответа
   Ожидаемый результат:
1. Статус-код ответа на создание: 201
2. В ответе поля id (новый), post, parent, content.raw корректны
3. GET-запрос к родительскому комментарию возвращает код 200 родительский комментарий не изменился


### ID: TC-64
Название: Последовательное изменение статуса комментария
Предусловия: Создан комментарий со статусом approved
Шаги:
1. Получить комментарий, убедиться, что status="approved"
2. Обновить комментарий, установив status="hold". Проверить ответ
3. Обновить комментарий, установив status="spam". Проверить ответ
4. Обновить комментарий, установив status="approved". Проверить ответ
   Ожидаемый результат после каждого шага обновления (2-4):
1. Статус-код ответа: 200
2. Поле status в ответе соответствует статусу, отправленному в запросе

